
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="./js/html2canvas.min.js"></script>
<script type="text/javascript" src="./js/jquery-1.8.3.min.js"></script>


<style type="text/css">
	td{
		width:5%;
		height:70px;
	}
</style>

<script type="text/javascript">
	
	function sortNumber(a,b)
	{
		return a - b;
	}
	function des(a,b){
		
		return b-a;
	}
	function getdata(){
		
		$.get("./php/dypf.php", function(data){
		  var json=JSON.parse(data);
		  var title=json.title;
		  $("#title").text("").append(title);
		  var datalist=json.data;
		  for(var i=0;i<datalist.length;i++)
		  {
			var name=datalist[i]['name'];
			var yjqt=datalist[i]['yjqt'];
			var pf=datalist[i]['pf'];
			var ljpf=datalist[i]['ljpf'];
			var cj=datalist[i]['cj'];
			var cjpf=datalist[i]['cjpf'];
			var pfzb=datalist[i]['pfzb'];
			var sz=datalist[i]['sz'];
			var syts=datalist[i]['syts'];
			var gyrc=datalist[i]['gyrc'];
		
			var str="<tr style=\"font-size:20px;color:#000;font-family:'微软雅黑'; text-align:center;font-weight:bold;\">";
			    str+="<td class='name' >"+name+"</td>";
				//str+="<td class='yjqt' >"+yjqt+"</td>";
				str+="<td class='pf' >"+pf+"</td>";
				str+="<td class='ljpf' >"+ljpf+"</td>";
				//str+="<td class='gyrc' >"+gyrc+"</td>";
				str+="<td class='cj' >"+cj+"</td>";
				//str+="<td class='cjpf' >"+cjpf+"</td>";
				str+="<td class='pfzb' >"+pfzb+"</td>";
				//str+="<td class='sz' >"+sz+"</td>";
				str+="<td class='syts' >"+syts+"</td>";
				
			$("#filmdata").append(str);

			
			}
			var dy=json.dy;
			for(var i=0;i<dy.length;i++)
			{
				var name=dy[i]['name'];
				var yjqt=dy[i]['yjqt'];
				var pf=dy[i]['pf'];
				var ljpf=dy[i]['ljpf'];
				var cj=dy[i]['cj'];
				var cjpf=dy[i]['cjpf'];
				var pfzb=dy[i]['pfzb'];
				var sz=dy[i]['sz'];
				var syts=dy[i]['syts'];
				var gyrc=dy[i]['gyrc'];
			
				var str="<tr style=\"font-size:20px;color:#000;font-family:'微软雅黑'; text-align:center;font-weight:bold;\">";
					str+="<td class='name' ><span style=\"font-size:12px;color:#FFC125;text-align:left;padding-left:0px;\">(点映)</span>"+name+"</td>";
					//str+="<td class='yjqt' >"+yjqt+"</td>";
					str+="<td class='pf' >"+pf+"</td>";
					str+="<td class='ljpf' >"+ljpf+"</td>";
					//str+="<td class='gyrc' >"+gyrc+"</td>";
					str+="<td class='cj' >"+cj+"</td>";
					//str+="<td class='cjpf' >"+cjpf+"</td>";
					str+="<td class='pfzb' >"+pfzb+"</td>";
					//str+="<td class='sz' >"+sz+"</td>";
					str+="<td class='syts' >"+syts+"</td>";
					
				$("#filmdata").append(str);

				
			}

			var ldc=json.ldc;
			for(var i=0;i<ldc.length;i++)
			{
				var name=ldc[i]['name'];
				var yjqt=ldc[i]['yjqt'];
				var pf=ldc[i]['pf'];
				var ljpf=ldc[i]['ljpf'];
				var cj=ldc[i]['cj'];
				var cjpf=ldc[i]['cjpf'];
				var pfzb=ldc[i]['pfzb'];
				var sz=ldc[i]['sz'];
				var syts=ldc[i]['syts'];
				var gyrc=ldc[i]['gyrc'];
			
				var str="<tr style=\"font-size:20px;color:#000;font-family:'微软雅黑'; text-align:center;font-weight:bold;\">";
					str+="<td class='name' ><span style=\"font-size:12px;color:#FFC125;\">(零点场)</span>"+name+"</td>";
					str+="<td class='name' ><span style=\"font-size:12px;color:#FFC125;text-align:left;padding-left:0px;\">(点映)</span>"+name+"</td>";
					//str+="<td class='yjqt' >"+yjqt+"</td>";
					str+="<td class='pf' >"+pf+"</td>";
					str+="<td class='ljpf' >"+ljpf+"</td>";
					//str+="<td class='gyrc' >"+gyrc+"</td>";
					str+="<td class='cj' >"+cj+"</td>";
					//str+="<td class='cjpf' >"+cjpf+"</td>";
					str+="<td class='pfzb' >"+pfzb+"</td>";
					//str+="<td class='sz' >"+sz+"</td>";
					str+="<td class='syts' >"+syts+"</td>";
					
				$("#filmdata").append(str);

				
			}

		
		var color_arr = new Array("#FFFAFA","#FFFAF5","#FFFAF0","#FFFACD","#FFF68F","#FFEC8B","#FFD700","#FFC125","#FFB90F","#FFA500");
		var data_type = new Array("yjqt","pf","ljpf","gyrc","cj","cjpf","pfzb","sz","syts");
		for(var m=0;m<data_type.length;m++)
		{
			var arr = new Array();
			var arr_cp = new Array();
			for(var j=0;j<datalist.length;j++)
			{
				arr[j]=parseFloat($("."+data_type[m]+":eq("+j+")").text().replace(/[^\d.]/g,''));
				
			}
			arr_cp=arr.slice();
			if(m==data_type.length-1)
			{
				arr.sort(des);
			}else
			{
				arr.sort(sortNumber);
			}
			
			
			for(var j=0;j<datalist.length;j++)
			{
				for(var k=0;k<datalist.length;k++)
				{
					if(arr[j]==arr_cp[k])
					{
						var background=color_arr[j];
						$("."+data_type[m]+":eq("+k+")").css({background:background});
						
					}
				
				}
				
				
			}
			
		}
		
		html2canvas($("#pic")).then(function(canvas) {
            document.body.appendChild(canvas);
			$("#pic").css({"display":"none" });
			
        });
		
		});
		
		$("#look").append("<a href='filmdaily.html' style='text-decoration:none'><input type='button' value='上一张'/></a><a href='xsxl.html' style='text-decoration:none'><input type='button' value='下一张'/></a>"); 
		
		
	}

</script>


</head>

<body onload="getdata()">

<div id="pic" style="width:640px;margin:0 auto;border:1px solid #FF7F00;background:#fff;">
<div style="font-family:'微软雅黑';color:#333;font-size:24px; font-weight:bold; text-align:left; height:60px;">
  <img src="logo.png" />
  <span id="title" style="margin-left:10%; "> 2016年8月10日电影票房</span>
</div>
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
 
  <tbody id="filmdata">
    <tr style="background:#FF8C00; height:80px;font-size:20px;color:#fff;font-family:'微软雅黑';">
      <th scope="col">电影名称</th>
      <!-- <th scope="col" style="background:#FF9700;">预计全天(万元)</th> -->
      <th scope="col">21:30票房(万元)</th>
      <th scope="col" style="background:#FF9700;">累计票房(万元)</th>
	  <!-- <th scope="col" >观影人次(人)</th> -->
      <th scope="col" style="background:#FF9700;">场均(人)</th>
      <!-- <th scope="col" >场均票房(元)</th> -->
      <th scope="col" style="background:#FF9700;">票房占比(%)</th>
      <!-- <th scope="col" >上座(%)</th> -->
      <th scope="col" style="background:#FF9700;">上映天数</th>
    </tr>
    
  </tbody>
</table>
</div>

<div id="look">
<div>
</body>
</html>
